<script>
  let timeLeft = 60;
  const countdownDisplay = document.getElementById('countdown');
  const seenBtn = document.getElementById('seenBtn');
  const newBtn = document.getElementById('newBtn');
  const wordDisplay = document.getElementById('word');
  const scoreDisplay = document.getElementById('score');

  function updateCountdown() {
      timeLeft -= 1;
      countdownDisplay.textContent = timeLeft;

      if (timeLeft <= 0) {
          window.location.href = `/gameover?score=${scoreDisplay.textContent}`;
      }
  }

  setInterval(updateCountdown, 1000);

  seenBtn.addEventListener('click', () => {
      fetch('/seen', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify({action: 'seen'})
      })
      .then(response => response.json())
      .then(data => {
          if (data.gameover) {
              window.location.href = `/gameover?score=${data.score}`;
          } else {
              wordDisplay.textContent = data.word;
              scoreDisplay.textContent = data.score;
          }
      });
  });

  newBtn.addEventListener('click', () => {
      fetch('/new', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify({action: 'new'})
      })
      .then(response => response.json())
      .then(data => {
          if (data.gameover) {
              window.location.href = `/gameover?score=${data.score}`;
          } else {
              wordDisplay.textContent = data.word;
              scoreDisplay.textContent = data.score;
          }
      });
  });
</script>
</body>
</html>
